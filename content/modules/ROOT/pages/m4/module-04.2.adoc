:imagesdir: ../../assets/images
include::../style.adoc[]

== Verify Change Events are Captured

* One way to verify that the connector is working is to create some change events in the database by creating some orders through the Globex retail application.

* Click on the browser tab pointing to the Globex retail application. If you don't have a browser tab open on the application, navigate to the link:{globex_web_url}[Globex retail application, window="_globex"] to launch the application.

* Click on the login button on the top right corner of the application. 
+
image::m4/globex-login.png[]

* Login with any of the username listed here *asilva/cjones/asanders/pwong/mmiller*. The password is `openshift`.
+
image::m4/login_credentials_page.png[]

* Once logged in, click on the *Cool Stuff Store* link on the tob bar to navigate to the store.
+
image::m4/cool-stuff-store.png[]

* Click on the item of your choice to open the product details page and then click on the *Add to Cart* button to add the item to your shopping cart. Feel free to browse and add multiple items to your cart.
+
image::m4/add_to_cart.png[]

* Click on the shopping cart icon on the top right corner to open your shopping cart.
+
image::m4/cart_icon.png[]

* Feel free to adjust the quantity of the items in your cart, then click on the *Proceed to Checkout* button to proceed to checkout.
+
image::m4/proceed_to_checkout.png[]

* Click on the *Autofill Form* button to autofill the checkout form
+
image::m4/autofill.png[]

* Click on *Submit Order* to submit your order.
+
image::m4/submit_order.png[]

* You should see an order confirmation page similar to the following.
+
image::m4/order_confirmation_page.png[]

* Now that you have created some orders in the Globex retail application, let's verify that the Debezium connector has captured the corresponding change events in the database and produced them to the appropriate Kafka topics.

* Open the browser tab pointing to the streams for Apache Kafka console UI. If you did close the tab, navigate to https://amq-streams-console-{user_name}.{openshift_subdomain}[streams for Apache Kafka console, window="_amqstreams"]. 

* From the Topics page, open the *globex.updates.public.orders* topic, and verify that the topic contains 1 message.
+
image::m4/amq-console-debezium-topic-orders.png[]

* Click on the message to expand it.  You should see a change event structure very similar to the ones for customers. Notice however that the operation is '*c*', for _create_. This is expected as the change event corresponds to a new record in the *order* table.
+
image::m4/amq-console-debezium-topic-order-details.png[]

* Go back to the streams for Apache Kafka Console topics page, and this time open the *globex.updates.public.line_item* topic. You should see one message per item in the order you created previously.
+
image::m4/amqconsole-debezium-topic-line-items.png[]


* If you want to simulate a larger number of orders, you can use the _Order simulator_ application deployed in the _globex-{user_name}_ namespace on OpenShift.

* In the browser window, open the tab pointing to the OpenShift console. If you don't have a tab open to the console, click navigate to {openshift_cluster_console}/topology/ns/globex-user5?view=graph[OpenShift console, window="console"]. If needed login with your username and password ({user_name}/{password}).


// * Switch to the *globex-{user_name}* namespace by selecting the namespace from the namespace selection drop-down menu in the top left.
// +
// image::m4/openshift-console-developer-select-namespace.png[]


* In the Topology view, click on the  route link next to the *order-simulator* deployment shown below.
+
image::m4/openshift-route-order-simulator.png[]


* This opens a Swagger UI page showing the REST API of the simulator. +
Click on the *POST* link, and then on the *Try it out* link on the right.
+
image::m4/order-simulator-swagger-ui-post.png[]


* From the *Examples* drop down, select *random customers* to create orders for random customers. Feel free to change the numbers of orders you want to simulate (the default is 50).
+
image::m4/order-simulator-random-customer.png[]

* Click *Execute* to execute the REST call to the simulator.

* Check in https://amq-streams-console-{user_name}.{openshift_subdomain}[streams for Apache Kafka console, window="_amqstreams"] that new messages are produced to the *globex.updates.public.orders* and *globex.updates.public.line_item* topics.

* This shows how Debezium can be used to capture change events from a relational database and produce them to Kafka topics in real-time, enabling event-driven architectures and data integration scenarios.

=== Up Next
In the next section, we will see some practical applications of change data capture in the context of the Globex retail application.


