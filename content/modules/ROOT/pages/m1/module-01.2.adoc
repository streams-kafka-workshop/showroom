:imagesdir: ../../assets/images
include::../style.adoc[]


== Kafka Basics - Partitions (how Kafka scales & orders)

Storing the messages in a topic in a single node would limit the scalability of the system. Partitions are the solution for this.A topic is split into partitions, each an ordered, append-only log, that are distributed across brokers. This allows {streams} to process a large number of messages in parallel and in a distributed manner. Partitions enable parallelism and throughput.

image::m1/topic-image.png[]

=== Ordering rule

Strict order exists within a partition.

No global order across a topic — if you need order for a key (e.g., userId), ensure all events for that key go to the same partition.

=== Offsets

Each record in a partition has a monotonically increasing offset (0, 1, 2…). Offsets are the consumer’s “cursor”.

=== Lag

The difference between the offset of the last message consumed and the offset of the last message in the partition.

=== Replication & durability

Each partition has one leader and replicas (followers).

Replication factor (e.g., 3) determines durability and availability.

Producers/consumers talk to the leader; followers keep up via replication.

image::m1/replication-broker.png[]



=== Key-based routing

With a key, the producer’s partitioner routes records with the same key to the same partition → per-key order.

With no key, producers distribute across partitions and order is not guaranteed.


