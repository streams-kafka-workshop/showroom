:imagesdir: ../../assets/images
include::../style.adoc[]


== Kafka Basics - Topics

Topics are the building blocks of Kafka. A topic is a logical collection of messages that you want to group together. It is a named, append-only stream of records (events/messages).
+
image::m1/topic-image.png[]

=== Why Topics?
They decouple producers (writers) and consumers (readers). Many producers can write, many consumers can read — independently and at their own pace.

=== Key properties

. *Immutable, append-only:* records are never updated in place.

. *Multi-subscriber:* any number of consumers can read the same topic without interfering with each other.

. *Retention-based:* Kafka keeps data based on time (e.g., 7 days) and/or size (e.g., 100GB), not “until consumed”.


=== Records (messages) inside a topic

. *Key (optional):* used for partitioning & compaction semantics.

. *Value:* your payload (JSON, Avro, Protobuf, bytes).

. *Headers (optional):* metadata (trace IDs, content-type, etc.).

. *Timestamp:* event time or broker time.


=== Creating a Topic

* In the upper terminal, login to the OpenShift cluster using the following command. use the image:common/clipboard.png[width=30px] icon to copy.
+
[source,sh,role="execute",subs=attributes+]
----
oc login --insecure-skip-tls-verify=false -u {user_name} -p {password} {openshift_api_url}
----

* In the upper terminal, create a Kafka topic named `demo` with 3 partitions and a replication factor of 1 (we will learn more about replication later) using the following command. 
+
[source,sh,role="execute",subs=attributes+]
----
oc run -n kafka-{user_name} topic-create --rm -it --restart=Never \
  --image=registry.redhat.io/amq-streams/kafka-40-rhel9:3.0.0 -- \
  bash -lc '/opt/kafka/bin/kafka-topics.sh --bootstrap-server kafka-kafka-bootstrap:9092 --create --topic demo --partitions 3 --replication-factor 1'
----
+
NOTE: This command creates a temporary container with the Kafka client tools installed and executes the Kafka command to create the topic. The container is removed after the command is executed. This is method is an easy way to learn the basics without having to install the client tools on your local machine.


* Describe the topic. This will show you the details of the topic, including the number of partitions and replicas.
+
[source,sh,role="execute",subs=attributes+]
----
oc run -n kafka-{user_name} topic-describe --rm -it --restart=Never \
  --image=registry.redhat.io/amq-streams/kafka-40-rhel9:3.0.0 -- \
  bash -lc '/opt/kafka/bin/kafka-topics.sh --bootstrap-server kafka-kafka-bootstrap:9092 --describe --topic demo'
----

* Click https://amq-streams-console-{user_name}.{openshift_cluster_subdomain}/kafka/[here, window="console"] to navigate to the {streams} console to view the topic you created. The console is a web-based user interface for visualizing and monitoring Kafka clusters, topics, messages etc.

* Login anonymously to the console.
+
image::m1/console_anonymous.png[]

* Click on *Topics* in the left menu to see the list of topics. You should see the `demo` topic you created. This topic has 3 partitions.
+
image::m1/console_topics.png[]


=== Up Next
We will learn more about partitions and replication in the later sections.








